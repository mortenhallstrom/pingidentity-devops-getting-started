
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://devops.pingidentity.com/deployment/pfMultiRegionAWSPrereq/">
      
      <link rel="shortcut icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.5">
    
    
      
        <title>AWS Multi-Region Prereq - Ping Identity DevOps</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.77f3fd56.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../mkdocs/overrides/stylesheets/extra.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-156953351-1","devops.pingidentity.com"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),"undefined"!=typeof location$&&location$.subscribe(function(e){ga("send","pageview",e.pathname)})})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="indigo" data-md-color-accent="blue">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aws-multi-region-pingfederate-cluster-prerequisite" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://devops.pingidentity.com/" title="Ping Identity DevOps" class="md-header__button md-logo" aria-label="Ping Identity DevOps">
      <!-- Logo -->

  


    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ping Identity DevOps
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AWS Multi-Region Prereq
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/pingidentity/pingidentity-devops-getting-started" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pingidentity/pingidentity-devops-getting-started
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        DevOps @ Ping
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../get-started/getStarted/" class="md-tabs__link">
        Get Started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../deploy/" class="md-tabs__link md-tabs__link--active">
        Deployment
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../how-to/existingLicense/" class="md-tabs__link">
        How To
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/config/" class="md-tabs__link">
        Reference
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../release-notes/relnotes-2102/" class="md-tabs__link">
        Release Notes
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://devops.pingidentity.com/" title="Ping Identity DevOps" class="md-nav__button md-logo" aria-label="Ping Identity DevOps">
      <!-- Logo -->

  


    </a>
    Ping Identity DevOps
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/pingidentity/pingidentity-devops-getting-started" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    pingidentity/pingidentity-devops-getting-started
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      <label class="md-nav__link" for="__nav_1">
        DevOps @ Ping
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DevOps @ Ping" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          DevOps @ Ping
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../license/" class="md-nav__link">
        License
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../disclaimer/" class="md-nav__link">
        Disclaimer
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../3rdPartySoftware/" class="md-nav__link">
        Third-Party Software
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Contributing
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Get Started
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Get Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Get Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/getStarted/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/pingDevopsUtil/" class="md-nav__link">
        ping-devops Utility
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/devopsRegistration/" class="md-nav__link">
        DevOps Registration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/devopsUserKey/" class="md-nav__link">
        Using Your DevOps User and Key
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/prodLicense/" class="md-nav__link">
        DevOps Product Licenses
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../get-started/getStartedWithGitRepo/" class="md-nav__link">
        Deploy Example Stack
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Deployment
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deployment" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Deployment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      <label class="md-nav__link" for="__nav_3_2">
        Deploy with Docker-Compose
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deploy with Docker-Compose" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Deploy with Docker-Compose
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployCompose/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deploySimpleStack/" class="md-nav__link">
        Deploy PingFederate and PingDirectory Stack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployReplication/" class="md-nav__link">
        Deploy Replicated PingDirectory Pair
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deploySync/" class="md-nav__link">
        Deploy PingDirectory and PingDataSync
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deploySyncFailover/" class="md-nav__link">
        Deploy PingDataSync Failover Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPingDataConsoleSSO/" class="md-nav__link">
        Deploy PingDataConsole with PingOne SSO
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPingCentral/" class="md-nav__link">
        Deploy PingCentral
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPfCluster/" class="md-nav__link">
        Deploy PingFederate Cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPaCluster/" class="md-nav__link">
        Deploy PingAccess Cluster
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPdgPap/" class="md-nav__link">
        Deploy PingDataGovernance with PAP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployMonitoringStack/" class="md-nav__link">
        Deploy Monitoring Stack
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deploySiemStack/" class="md-nav__link">
        Deploy an Elasticsearch SIEM Stack
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" checked>
      
      <label class="md-nav__link" for="__nav_3_3">
        Deploy with Kubernetes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deploy with Kubernetes" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Deploy with Kubernetes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8s/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployHelm/" class="md-nav__link">
        Deploy with PingIdentiy Helm Charts
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sPD-clusters/" class="md-nav__link">
        PingDirectory Deployments Across Kubernetes Clusters
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_4" type="checkbox" id="__nav_3_3_4" checked>
      
      <label class="md-nav__link" for="__nav_3_3_4">
        Kubernetes Deployments For General Use
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kubernetes Deployments For General Use" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_4">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes Deployments For General Use
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sGeneral/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sStandalone/" class="md-nav__link">
        Orchestrate Standalone Deployments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sFullstack/" class="md-nav__link">
        Orchestrate a Full Stack Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sReplicated/" class="md-nav__link">
        Orchestrate a Replicated PingDirectory Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sPA-cluster/" class="md-nav__link">
        Orchestrate a PingAccess Cluster Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sPF-cluster/" class="md-nav__link">
        Orchestrate a PingFederate Cluster Deployment
      </a>
    </li>
  

          
            
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_4_7" type="checkbox" id="__nav_3_3_4_7" checked>
      
      <label class="md-nav__link" for="__nav_3_3_4_7">
        Deploy PingFederate Across Multiple Kubernetes Clusters
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Deploy PingFederate Across Multiple Kubernetes Clusters" data-md-level="4">
        <label class="md-nav__title" for="__nav_3_3_4_7">
          <span class="md-nav__icon md-icon"></span>
          Deploy PingFederate Across Multiple Kubernetes Clusters
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sPFclusters/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          AWS Multi-Region Prereq
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        AWS Multi-Region Prereq
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-the-aws-cli" class="md-nav__link">
    Configure the AWS CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-multi-region-clusters" class="md-nav__link">
    Create the Multi-Region Clusters
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPFMultiRegionDNS/" class="md-nav__link">
        PingFederate Across Kubernetes with DNS
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployPFMultiRegionAWS/" class="md-nav__link">
        PingFederate Across Kubernetes with S3
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3_5" type="checkbox" id="__nav_3_3_5" >
      
      <label class="md-nav__link" for="__nav_3_3_5">
        Kubernetes Deployments For Cloud Platforms
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Kubernetes Deployments For Cloud Platforms" data-md-level="3">
        <label class="md-nav__title" for="__nav_3_3_5">
          <span class="md-nav__icon md-icon"></span>
          Kubernetes Deployments For Cloud Platforms
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8sCloud/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8s-AWS/" class="md-nav__link">
        Deploy Peered EKS Clusters
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployK8s-AKS/" class="md-nav__link">
        Deploy to Azure Kubernetes Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../k8sClusterSizing/" class="md-nav__link">
        Sizing Kubernetes Clusters
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../deployVault/" class="md-nav__link">
        Deploy Hashicorp Vault
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        How To
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="How To" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          How To
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/existingLicense/" class="md-nav__link">
        Use Existing Licenses
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      <label class="md-nav__link" for="__nav_4_2">
        Server Profile
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Server Profile" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Server Profile
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/containerAnatomy/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/profiles/" class="md-nav__link">
        Customization
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/saveConfigs/" class="md-nav__link">
        Saving Configurations
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/buildPingFederateProfile/" class="md-nav__link">
        Build Your Own ...
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/profilesLayered/" class="md-nav__link">
        Layering
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/profilesSubstitution/" class="md-nav__link">
        ENV Substitution
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/privateRepos/" class="md-nav__link">
        Private Github Repos
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/usingVault/" class="md-nav__link">
        Vault/Secrets
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/secureContainers/" class="md-nav__link">
        Securing the Containers
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        Upgrading Deployments
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Upgrading Deployments" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Upgrading Deployments
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/manage/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/upgradePingfederate/" class="md-nav__link">
        Upgrading PingFederate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../how-to/upgradePingDirectory/" class="md-nav__link">
        Upgrading PingDirectory
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/config/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/profileStructures/" class="md-nav__link">
        Server Profile
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/yamlFiles/" class="md-nav__link">
        Docker Compose YAML
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/variableScoping/" class="md-nav__link">
        Variables and Scope
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/usingCertificates/" class="md-nav__link">
        Certificates
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_6" type="checkbox" id="__nav_5_6" >
      
      <label class="md-nav__link" for="__nav_5_6">
        Image Info
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Image Info" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_6">
          <span class="md-nav__icon md-icon"></span>
          Image Info
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/releaseTags/" class="md-nav__link">
        Release Tags
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/imageSupport/" class="md-nav__link">
        Using Supported Images
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dockerImageSecurity/" class="md-nav__link">
        DevOps Image Security
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_7" type="checkbox" id="__nav_5_7" >
      
      <label class="md-nav__link" for="__nav_5_7">
        Utilities
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Utilities" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_7">
          <span class="md-nav__icon md-icon"></span>
          Utilities
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ldapsdkUtil/" class="md-nav__link">
        ldap-sdk-tools
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" type="checkbox" id="__nav_5_9" >
      
      <label class="md-nav__link" for="__nav_5_9">
        DevOps Images Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="DevOps Images Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          DevOps Images Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/dockerImagesRef/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingaccess/" class="md-nav__link">
        PingAccess
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingbase/" class="md-nav__link">
        PingBase
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingcentral/" class="md-nav__link">
        PingCentral
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingcommon/" class="md-nav__link">
        PingCommon
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdatacommon/" class="md-nav__link">
        PingDataCommon
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdataconsole/" class="md-nav__link">
        PingDataConsole
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdatagovernance/" class="md-nav__link">
        PingDataGovernance
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdatagovernancepap/" class="md-nav__link">
        PingDataGovernance PAP
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdatasync/" class="md-nav__link">
        PingDataSync
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdelegator/" class="md-nav__link">
        PingDelegator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdirectory/" class="md-nav__link">
        PingDirectory
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdirectoryproxy/" class="md-nav__link">
        PingDirectoryProxy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingdownloader/" class="md-nav__link">
        PingDownloader
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingfederate/" class="md-nav__link">
        PingFederate
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingintelligence/" class="md-nav__link">
        PingIntelligence
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/pingtoolkit/" class="md-nav__link">
        PingToolkit
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/apache-jmeter/" class="md-nav__link">
        Apache JMeter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../docker-images/ldap-sdk-tools/" class="md-nav__link">
        ldap-sdk-tools
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_10" type="checkbox" id="__nav_5_10" >
      
      <label class="md-nav__link" for="__nav_5_10">
        Advanced Topics
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced Topics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          Advanced Topics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/hooks/" class="md-nav__link">
        DevOps Hooks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/addMOTD/" class="md-nav__link">
        Adding a MOTD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/buildLocal/" class="md-nav__link">
        Build Local Images
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        Release Notes
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Release Notes" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2102/" class="md-nav__link">
        Current
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2101/" class="md-nav__link">
        Version 2101
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2012/" class="md-nav__link">
        Version 2012
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2011/" class="md-nav__link">
        Version 2011
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2010/" class="md-nav__link">
        Version 2010
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2009/" class="md-nav__link">
        Version 2009
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2008/" class="md-nav__link">
        Version 2008
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2007/" class="md-nav__link">
        Version 2007
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2006/" class="md-nav__link">
        Version 2006
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2005/" class="md-nav__link">
        Version 2005
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2004/" class="md-nav__link">
        Version 2004
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/relnotes-2003/" class="md-nav__link">
        Version 2003
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-the-aws-cli" class="md-nav__link">
    Configure the AWS CLI
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-the-multi-region-clusters" class="md-nav__link">
    Create the Multi-Region Clusters
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="aws-multi-region-pingfederate-cluster-prerequisite">AWS Multi-Region PingFederate Cluster (Prerequisite)<a class="headerlink" href="#aws-multi-region-pingfederate-cluster-prerequisite" title="Permanent link"> ¶</a></h1>
<p>In this example, we'll deploy 2 PingFederate clusters, each in a different Amazon Web Services (AWS) region. An AWS virtual private cloud (VPC) is assigned and dedicated to each cluster. Throughout this document, "VPC" is synonymous with "cluster".</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"> ¶</a></h2>
<ul>
<li>
<p><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-install.html">AWS CLI</a>.</p>
</li>
<li>
<p><a href="https://docs.aws.amazon.com/eks/latest/userguide/eksctl.html">eksctl</a>, the current version.</p>
</li>
<li>
<p>AWS account permissions to create clusters.</p>
</li>
</ul>
<h2 id="configure-the-aws-cli">Configure the AWS CLI<a class="headerlink" href="#configure-the-aws-cli" title="Permanent link"> ¶</a></h2>
<p>If you've not already done so, configure the AWS CLI to use your profile and credentials:</p>
<ol>
<li>
<p>Assign your profile and supply your <code>aws_access_key_id</code> and <code>aws_secret_access_key</code>. Enter:</p>
<div class="highlight"><pre><span></span><code>aws configure --profile<span class="o">=</span>&lt;aws-profile&gt;
</code></pre></div>
<p>Then enter your <code>aws_access_key_id</code> and <code>aws_secret_access_key</code>.</p>
</li>
<li>
<p>Open your <code>~/.aws/credentials</code> file in a text editor and add your AWS <code>role_arn</code>. For example:</p>
<div class="highlight"><pre><span></span><code>“role_arn <span class="o">=</span> arn:aws:iam::xxxxxxxx4146:role/GTE”
</code></pre></div>
</li>
</ol>
<h2 id="create-the-multi-region-clusters">Create the Multi-Region Clusters<a class="headerlink" href="#create-the-multi-region-clusters" title="Permanent link"> ¶</a></h2>
<ol>
<li>
<p>Create the YAML files to configure the the clusters. You'll create the clusters in different AWS regions. We'll be using the <code>ca-central-1</code> region and the <code>us-west-2</code> region in this document.</p>
<ol>
<li>
<p>Configure the first cluster. For example, using the <code>ca-central-1</code> region and the reserved CIDR 172.16.0.0:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eksctl.io/v1alpha5</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterConfig</span>

<span class="nt">metadata</span><span class="p">:</span>
<span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pingfed-ca-central-1</span>
<span class="nt">region</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ca-central-1</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&quot;1.17&quot;</span>

<span class="nt">vpc</span><span class="p">:</span>
<span class="nt">cidr</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">172.16.0.0/16</span>

<span class="nt">managedNodeGroups</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-west-2a-worker-nodes</span>
   <span class="l l-Scalar l-Scalar-Plain">instanceType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">t3a.2xlarge</span>
   <span class="l l-Scalar l-Scalar-Plain">labels</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
   <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
   <span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
   <span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
   <span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
   <span class="nt">volumeSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
   <span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
   <span class="nt">ssh</span><span class="p">:</span>
      <span class="nt">publicKeyPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span>
   <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">withAddonPolicies</span><span class="p">:</span>
      <span class="nt">imageBuilder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">autoScaler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">externalDNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">certManager</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">appMesh</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">ebs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">fsx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">efs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">albIngress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">xRay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">cloudWatch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-west-2b-worker-nodes</span>
<span class="nt">instanceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">t3a.2xlarge</span>
<span class="nt">labels</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">volumeSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
<span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">ssh</span><span class="p">:</span>
   <span class="nt">publicKeyPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span>
<span class="nt">iam</span><span class="p">:</span>
   <span class="nt">withAddonPolicies</span><span class="p">:</span>
      <span class="nt">imageBuilder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">autoScaler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">externalDNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">certManager</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">appMesh</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">ebs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">fsx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">efs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">albIngress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">xRay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">cloudWatch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Config Settings</p>
<ul>
<li>For production purposes, select a VPC with a private IP.</li>
<li>The ssh entry is optional, allowing you to SSH in to your cluster.</li>
</ul>
</div>
</li>
<li>
<p>Configure the second cluster. For example, using the <code>us-west-2</code> region and the reserved CIDR 10.0.0.0:</p>
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">eksctl.io/v1alpha5</span>
<span class="nt">kind</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ClusterConfig</span>

<span class="nt">metadata</span><span class="p">:</span>
<span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">pingfed-us-west-2</span>
<span class="nt">region</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-west-2</span>
<span class="nt">version</span><span class="p">:</span> <span class="s">&quot;1.17&quot;</span>

<span class="nt">vpc</span><span class="p">:</span>
<span class="nt">cidr</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.0.0/16</span>

<span class="nt">managedNodeGroups</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-west-2a-worker-nodes</span>
   <span class="l l-Scalar l-Scalar-Plain">instanceType</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">t3a.2xlarge</span>
   <span class="l l-Scalar l-Scalar-Plain">labels</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{}</span>
   <span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
   <span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
   <span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
   <span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
   <span class="nt">volumeSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
   <span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
   <span class="nt">ssh</span><span class="p">:</span>
      <span class="nt">publicKeyPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span>
   <span class="nt">iam</span><span class="p">:</span>
      <span class="nt">withAddonPolicies</span><span class="p">:</span>
      <span class="nt">imageBuilder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">autoScaler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">externalDNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">certManager</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">appMesh</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">ebs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">fsx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">efs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">albIngress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">xRay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">cloudWatch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">us-west-2b-worker-nodes</span>
<span class="nt">instanceType</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">t3a.2xlarge</span>
<span class="nt">labels</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">tags</span><span class="p">:</span> <span class="p p-Indicator">{}</span>
<span class="nt">minSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">maxSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">desiredCapacity</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">volumeSize</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">12</span>
<span class="nt">privateNetworking</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">ssh</span><span class="p">:</span>
   <span class="nt">publicKeyPath</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">~/.ssh/id_rsa.pub</span>
<span class="nt">iam</span><span class="p">:</span>
   <span class="nt">withAddonPolicies</span><span class="p">:</span>
      <span class="nt">imageBuilder</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">autoScaler</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">externalDNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">certManager</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">appMesh</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">ebs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">fsx</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">efs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">albIngress</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">xRay</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">cloudWatch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Config Settings</p>
<ul>
<li>For production purposes, select a VPC with a private IP.</li>
<li>The ssh entry is optional, allowing you to SSH in to your cluster.</li>
</ul>
</div>
</li>
</ol>
</li>
<li>
<p>Create the clusters using <code>eksctl</code>.</p>
<ol>
<li>Create the first cluster. For example:</li>
</ol>
<div class="highlight"><pre><span></span><code>eksctl create cluster -f ca-central-1.yaml --profile &lt;aws-profile&gt;
</code></pre></div>
<ol>
<li>Create the second cluster. For example:</li>
</ol>
<div class="highlight"><pre><span></span><code>eksctl create cluster -f us-west-2.yaml --profile &lt;aws-profile&gt;
</code></pre></div>
</li>
<li>
<p>Log in to the AWS console, go to the <strong>VPC</strong> service, select <strong>Your VPCs</strong> (under Virtual Private Cloud), and note the VPC details for the clusters you've created.</p>
<div class="admonition info">
<p class="admonition-title">VPC IDs</p>
<p>Retain the <code>VpcId</code> values for the <code>ca-central-1</code> and <code>us-west-2</code> VPCs. You'll use these in subsequent steps.</p>
</div>
</li>
<li>
<p>Set up VPC peering between the two clusters. You'll create a peering connection from the cluster in the <code>us-west-2</code> region to the cluster in the <code>ca-central-1</code> region. You'll do this from the VPC Dashboard as in the prior step.</p>
<ol>
<li>In the top right of the page, select the <strong>Oregon</strong> (us-west-2) region.</li>
<li>Select <strong>Peering Connections</strong>, and click <strong>Create Peering Connection</strong>.</li>
<li>Assign a unique name for the peering connection (for example, us-west-2-to-ca-central-1).</li>
<li>Under <strong>Select a local VPC to peer with</strong>, enter the <code>VpcId</code> value for the <code>us-west-2</code> VPC.</li>
<li>Under <strong>Select another VPC to peer with</strong>, select <strong>My account</strong> --&gt; <strong>Another region</strong> --&gt; <strong>Canada Central</strong> (ca-central-1).</li>
<li>Under <strong>VPC (Accepter)</strong>, enter the <code>VpcId</code> value for the <code>ca-central-1</code> region.</li>
<li>Click <strong>Create Peering Connection</strong>. When successful, a confirmation is displayed. Click <strong>OK</strong> to continue.</li>
<li>In the top right of the page, change the region to <strong>Canada Central</strong>.</li>
<li>
<p>Select <strong>Peering Connections</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Connection Status</p>
<p>Notice that the peering connection status for <code>us-west-2</code> shows as <code>Pending Acceptance</code>.</p>
</div>
</li>
<li>
<p>Select the <code>ca-central-1</code> connection, click the <strong>Actions</strong> dropdown list, and select <strong>Accept Request</strong>. You'll be prompted to confirm.</p>
<div class="admonition note">
<p class="admonition-title">Connection Status</p>
<p>The VPC peering connection status should now show as <code>Active</code>.</p>
</div>
</li>
</ol>
</li>
<li>
<p>Get the subnets information for each cluster node. Each cluster node uses a different subnet, so there'll be three subnets assigned to each VPC. The information displayed will contain the subnet ID for each subnet. You'll use the subnet IDs in the subsequent step to get the associated routing tables.</p>
<ol>
<li>In the top right of the page, change the region to <strong>Oregon</strong>.</li>
<li>Go to the <strong>EC2</strong> service, and select <strong>Instances</strong>. Apply a filter, if needed, to find your nodes for the cluster.</li>
<li>Select each node, and record the <strong>Subnet ID</strong> of each. You'll use the subnet IDs in a subsequent step.</li>
<li>In the top right of the page, change the region to <strong>Canada Central</strong>, and repeat the 2 previous steps to find and record the subnet IDs for this VPC.</li>
</ol>
</li>
<li>
<p>Get the routing table associated with the subnets for each VPC.</p>
<ol>
<li>Go to the <strong>VPC</strong> service. (You're still using the Canada Central region.)</li>
<li>In the VPC Dashboard, select <strong>Subnets</strong>.</li>
<li>For each subnet displayed, record the <strong>Routing Table</strong> value. You may have a single routing table for all of your subnets. You'll use the routing table ID or IDs in a subsequent step.</li>
<li>In the top right of the page, change the region to <strong>Oregon</strong>, and repeat the 2 previous steps to find and record the routing table ID or IDs for this VPC.</li>
</ol>
</li>
<li>
<p>Modify the routing table or tables for each VPC to add a route to the other VPC using the peering connection you created.</p>
<ol>
<li>In the VPC Dashboard, select <strong>Route Tables</strong>. (You're still using the Oregon region.)</li>
<li>Select the route table you recorded for the <code>us-west-2</code> (Oregon) VPC, and click the <code>Routes</code> button. You should see 2 routes displayed.</li>
<li>Click <strong>Edit Routes</strong> --&gt; <strong>Add Route</strong>, and for <strong>Destination</strong>, enter the CIDR block for the <code>ca-central-1</code> cluster (172.16.0.0/16).</li>
<li>For <strong>Target</strong>, select the VPC peering connection you created in a prior step. Click <strong>Save Routes</strong>.
     A route for the <code>ca-central-1</code> cluster directed to the peering connection is displayed.</li>
<li>If more than one routing table is used for the <code>us-west-2</code> VPC, repeat the previous steps for each routing table.</li>
<li>In the top right of the page, change the region to <strong>Canada Central</strong>.</li>
<li>Select the route table you recorded for the <code>ca-central-1</code> (Canada Central) VPC, and click the <code>Routes</code> button. You should see 2 routes displayed.</li>
<li>Click <strong>Edit Routes</strong> --&gt; <strong>Add Route</strong>, and for <strong>Destination</strong>, enter the CIDR block for the <code>us-west-2</code> cluster (10.0.0.0/16).</li>
<li>For <strong>Target</strong>, select the VPC peering connection you created in a prior step. Click <strong>Save Routes</strong>.
     A route for the <code>us-west-2</code> cluster directed to the peering connection is displayed.</li>
<li>If more than one routing table is used for the <code>ca-central-1</code> VPC, repeat the previous steps for each routing table.</li>
</ol>
</li>
<li>
<p>Update the Security Groups for each VPC. You'll get the Security Group IDs for each VPC, then add inbound and outbound rules for both the <code>us-west-2</code> VPC, and the <code>ca-central-1</code> VPC.</p>
<ol>
<li>In the VPC Dashboard, select <strong>Security Groups</strong>.  (You're still using the Canada Central region.)</li>
<li>Apply a filter to find the security groups for the <code>ca-central-1</code> cluster, and select the security group with “-nodegroup” in the name. This is the security group used for the firewall settings for all the worker nodes in the <code>ca-central-1</code> cluster.</li>
<li>Click <strong>Inbound Rules</strong> --&gt; <strong>Add Rule</strong>.</li>
<li>
<p>Select these values for the rule:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>Custom TCP Rule</td>
</tr>
<tr>
<td>Protocol</td>
<td>TCP</td>
</tr>
<tr>
<td>Port Range</td>
<td>7600-7700</td>
</tr>
<tr>
<td>Source</td>
<td>Custom. Enter the CIDR block for the <code>us-west-2</code> (10.0.0.0/16) cluster.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save Rules</strong> to save the inbound security group rule for the <code>ca-central-1</code> cluster.</p>
</li>
<li>Click <strong>Outbound Rules</strong> --&gt; <strong>Add Rule</strong>.</li>
<li>
<p>Select these values for the rule:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>Custom TCP Rule</td>
</tr>
<tr>
<td>Protocol</td>
<td>TCP</td>
</tr>
<tr>
<td>Port Range</td>
<td>7600-7700</td>
</tr>
<tr>
<td>Source</td>
<td>Custom. Enter the CIDR block for the <code>us-west-2</code> (10.0.0.0/16) cluster.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save Rules</strong> to save the outbound security group rule for the <code>ca-central-1</code> cluster.</p>
</li>
<li>In the top right of the page, change the region to <strong>Oregon</strong>. You'll now repeat the previous steps to add inbound and outbound rules for the <code>us-west-2</code> cluster.</li>
<li>Apply a filter to find the security groups for the <code>us-west-2</code> cluster, and select the security group with “-nodegroup” in the name. This is the security group used for the firewall settings for all the worker nodes in the <code>us-west-2</code> cluster.</li>
<li>Click <strong>Inbound Rules</strong> --&gt; <strong>Add Rule</strong>.</li>
<li>
<p>Select these values for the rule:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>Custom TCP Rule</td>
</tr>
<tr>
<td>Protocol</td>
<td>TCP</td>
</tr>
<tr>
<td>Port Range</td>
<td>7600-7700</td>
</tr>
<tr>
<td>Source</td>
<td>Custom. Enter the CIDR block for the <code>ca-central-1</code> (172.16.0.0/16) cluster.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save Rules</strong> to save the inbound security group rule for the <code>us-west-2</code> cluster.</p>
</li>
<li>Click <strong>Outbound Rules</strong> --&gt; <strong>Add Rule</strong>.</li>
<li>
<p>Select these values for the rule:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>Custom TCP Rule</td>
</tr>
<tr>
<td>Protocol</td>
<td>TCP</td>
</tr>
<tr>
<td>Port Range</td>
<td>7600-7700</td>
</tr>
<tr>
<td>Source</td>
<td>Custom. Enter the CIDR block for the <code>ca-central-1</code> (172.16.0.0/16) cluster.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Click <strong>Save Rules</strong> to save the outbound security group rule for the <code>us-west-2</code> cluster.</p>
</li>
</ol>
</li>
</ol>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../deployK8sPFclusters/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
        <a href="../deployPFMultiRegionDNS/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              PingFederate Across Kubernetes with DNS
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © Copyright 2021 Ping Identity
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "instant"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.5cf3e710.min.js"></script>
      
    
  </body>
</html>